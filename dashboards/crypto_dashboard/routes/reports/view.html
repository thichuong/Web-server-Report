<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Toàn Cảnh Thị Trường</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/shared_assets/css/colors.css">
    <link rel="stylesheet" href="/shared_assets/css/style.css">
    <link rel="stylesheet" href="/shared_assets/css/chart.css">
    <link rel="stylesheet" href="/shared_assets/css/report.css">

    <!-- report-specific CSS inserted from DB -->
    <style>
        /* <![CDATA[ */
        {{ report.css_content }}
        /* ]]> */
    </style>
</head>
<body class="antialiased">
    {% include "crypto/components/theme_toggle.html" %}
    {% include "crypto/components/language_toggle.html" %}

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-2">
                <span data-i18n="site-title">Toàn Cảnh Thị Trường Tiền Mã Hóa</span>
            </h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                <span data-i18n="analysis-summary">Báo cáo tổng hợp</span>
            </p>
            <div class="mt-6 flex items-center justify-center space-x-4">
                <a href="/" class="inline-block bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700"><span data-i18n="home">Trang chủ</span></a>
                <a href="{{ pdf_url }}" target="_blank" class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-green-700 transition-colors duration-300">
                    <i class="fas fa-print mr-2"></i> <span data-i18n="print-report">In Báo cáo</span>
                </a>
                <a href="/crypto_reports_list" class="inline-block bg-gray-700 text-white font-bold py-3 px-6 rounded-lg"><span data-i18n="view-report-history">Lịch sử báo cáo</span></a>
            </div>
        </header>

        <div class="space-y-6 mb-12">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="card">
                    <div class="flex items-center mb-2">
                        <i class="fab fa-bitcoin text-yellow-500 text-3xl mr-3"></i>
                        <h3 class="text-lg font-semibold text-gray-700">Giá BTC</h3>
                    </div>
                    <div id="btc-price-container">
                        <div class="skeleton h-9 w-3/4 mb-2"></div>
                        <div class="skeleton h-5 w-1/2"></div>
                    </div>
                </div>
                <div class="card">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-globe-americas text-blue-500 text-3xl mr-3"></i>
                        <h3 class="text-lg font-semibold text-gray-700">Tổng Vốn Hóa</h3>
                    </div>
                    <div id="market-cap-container">
                        <div class="skeleton h-9 w-3/4 mb-2"></div>
                        <div class="skeleton h-5 w-1/2"></div>
                    </div>
                </div>
                <div class="card">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-chart-line text-green-500 text-3xl mr-3"></i>
                        <h3 class="text-lg font-semibold text-gray-700">Khối Lượng Giao Dịch 24h</h3>
                    </div>
                     <div id="volume-24h-container">
                        <div class="skeleton h-9 w-3/4 mb-2"></div>
                        <div class="skeleton h-5 w-1/2"></div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4 text-center">Chỉ số Sợ hãi & Tham lam</h3>
                    <div id="fear-greed-container" class="w-full max-w-sm mx-auto">
                        <div class="skeleton h-48 w-full rounded-full"></div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4 text-center">Chỉ số Sức mạnh Tương đối (RSI 14) - BTC</h3>
                    <div id="rsi-container" class="w-full max-w-sm mx-auto">
                        <div class="skeleton h-48 w-full rounded-full"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tuyên bố miễn trừ trách nhiệm: chỉ mang tính chất tham khảo (i18n) -->
        <div id="disclaimer" class="mb-6">
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                <p class="text-sm text-gray-700">
                    <strong data-i18n="disclaimer-title">Tuyên bố miễn trừ trách nhiệm:</strong>
                    <span data-i18n="disclaimer-body">Nội dung và phân tích trên trang này chỉ mang tính chất tham khảo và không cấu thành lời khuyên đầu tư. Mọi quyết định đầu tư là trách nhiệm của người đọc.</span>
                </p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-x-12 pb-96">
            <aside class="hidden lg:block lg:col-span-1">
                 <nav id="report-navigation-panel" class="sticky top-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 tracking-wide">Mục lục Báo cáo</h3>
                    <ul id="report-nav-links" class="space-y-2">
                        </ul>
                </nav>
            </aside>
            <main id="report-container" class="lg:col-span-3">
                <!-- Vietnamese report content injected from DB -->
                <div id="report-content-vi">
                    {{ report.html_content }}
                </div>

                <!-- English report content (optional) -->
                <div id="report-content-en" style="display:none;">
                    {{ report.html_content_en }}
                </div>
            </main>
        </div>
    </div>

    <!-- Chart modules will be injected here -->
    <script>
        {{ chart_modules_content }}
    </script>

    <!-- report-specific JS inserted from DB -->
    <script id="report-js">
        {{ report.js_content }}
    </script>

    <script src="/shared_components/core/theme-manager.js" defer></script>
    <script src="/shared_components/websocket-dashboard.js" defer></script>
    <script src="/crypto_dashboard/assets/dashboard.js" defer></script>
    <script src="/shared_components/core/language-toggle.js" defer></script>
</body>
</html>